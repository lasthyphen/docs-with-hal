(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{21682:function(o,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/getting-started/tutorials/multisig-utxos",function(){return e(23573)}])},23573:function(o,t,e){"use strict";e.r(t),e.d(t,{CH:function(){return l},Page:function(){return h},chCodeConfig:function(){return p},meta:function(){return a}});var r=e(52322),n=e(3905),s=e(65854),c=e(72499),l={annotations:s.ds,Code:s.EK},p={staticMediaQuery:"not screen, (max-width: 768px)",theme:{name:"supabase",type:"from-css",tokenColors:[{scope:["comment","punctuation.definition.comment","string.comment"],settings:{foreground:"var(--ch-1)"}},{scope:["constant","entity.name.constant","variable.other.constant","variable.other.enummember","variable.language","entity"],settings:{foreground:"var(--ch-2)"}},{scope:["entity.name","meta.export.default","meta.definition.variable"],settings:{foreground:"var(--ch-3)"}},{scope:["variable.parameter.function","meta.jsx.children","meta.block","meta.tag.attributes","entity.name.constant","meta.object.member","meta.embedded.expression"],settings:{foreground:"var(--ch-4)"}},{scope:"entity.name.function",settings:{foreground:"var(--ch-5)"}},{scope:["entity.name.tag","support.class.component"],settings:{foreground:"var(--ch-6)"}},{scope:"keyword",settings:{foreground:"var(--ch-7)"}},{scope:["storage","storage.type"],settings:{foreground:"var(--ch-7)"}},{scope:["storage.modifier.package","storage.modifier.import","storage.type.java"],settings:{foreground:"var(--ch-4)"}},{scope:["string","string punctuation.section.embedded source"],settings:{foreground:"var(--ch-8)"}},{scope:"support",settings:{foreground:"var(--ch-2)"}},{scope:"meta.property-name",settings:{foreground:"var(--ch-2)"}},{scope:"variable",settings:{foreground:"var(--ch-3)"}},{scope:"variable.other",settings:{foreground:"var(--ch-4)"}},{scope:"invalid.broken",settings:{foreground:"var(--ch-9)",fontStyle:"italic"}},{scope:"invalid.deprecated",settings:{foreground:"var(--ch-9)",fontStyle:"italic"}},{scope:"invalid.illegal",settings:{foreground:"var(--ch-9)",fontStyle:"italic"}},{scope:"invalid.unimplemented",settings:{foreground:"var(--ch-9)",fontStyle:"italic"}},{scope:"carriage-return",settings:{background:"var(--ch-7)",foreground:"var(--ch-10)",fontStyle:"italic underline"}},{scope:"message.error",settings:{foreground:"var(--ch-9)"}},{scope:"string variable",settings:{foreground:"var(--ch-2)"}},{scope:["source.regexp","string.regexp"],settings:{foreground:"var(--ch-8)"}},{scope:["string.regexp.character-class","string.regexp constant.character.escape","string.regexp source.ruby.embedded","string.regexp string.regexp.arbitrary-repitition"],settings:{foreground:"var(--ch-8)"}},{scope:"string.regexp constant.character.escape",settings:{foreground:"var(--ch-6)",fontStyle:"bold"}},{scope:"support.constant",settings:{foreground:"var(--ch-2)"}},{scope:"support.variable",settings:{foreground:"var(--ch-2)"}},{scope:"support.type.property-name.json",settings:{foreground:"var(--ch-6)"}},{scope:"meta.module-reference",settings:{foreground:"var(--ch-2)"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"var(--ch-3)"}},{scope:["markup.heading","markup.heading entity.name"],settings:{foreground:"var(--ch-2)",fontStyle:"bold"}},{scope:"markup.quote",settings:{foreground:"var(--ch-6)"}},{scope:"markup.italic",settings:{foreground:"var(--ch-4)",fontStyle:"italic"}},{scope:"markup.bold",settings:{foreground:"var(--ch-4)",fontStyle:"bold"}},{scope:["markup.underline"],settings:{fontStyle:"underline"}},{scope:["markup.strikethrough"],settings:{fontStyle:"strikethrough"}},{scope:"markup.inline.raw",settings:{foreground:"var(--ch-2)"}},{scope:["markup.deleted","meta.diff.header.from-file","punctuation.definition.deleted"],settings:{background:"var(--ch-11)",foreground:"var(--ch-9)"}},{scope:["punctuation.section.embedded"],settings:{foreground:"var(--ch-7)"}},{scope:["markup.inserted","meta.diff.header.to-file","punctuation.definition.inserted"],settings:{background:"var(--ch-12)",foreground:"var(--ch-6)"}},{scope:["markup.changed","punctuation.definition.changed"],settings:{background:"var(--ch-13)",foreground:"var(--ch-3)"}},{scope:["markup.ignored","markup.untracked"],settings:{background:"var(--ch-2)",foreground:"var(--ch-14)"}},{scope:"meta.diff.range",settings:{foreground:"var(--ch-5)",fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"var(--ch-2)"}},{scope:"meta.separator",settings:{foreground:"var(--ch-2)",fontStyle:"bold"}},{scope:"meta.output",settings:{foreground:"var(--ch-2)"}},{scope:["brackethighlighter.tag","brackethighlighter.curly","brackethighlighter.round","brackethighlighter.square","brackethighlighter.angle","brackethighlighter.quote"],settings:{foreground:"var(--ch-15)"}},{scope:"brackethighlighter.unmatched",settings:{foreground:"var(--ch-9)"}},{scope:["constant.other.reference.link","string.other.link"],settings:{foreground:"var(--ch-8)",fontStyle:"underline"}}],colors:{"editor.background":"var(--ch-16)","editor.foreground":"var(--ch-4)","editor.selectionBackground":"var(--ch-17)","editor.infoForeground":"var(--ch-18)","editor.rangeHighlightBackground":"var(--ch-19)","editorLineNumber.foreground":"var(--ch-20)","tab.activeBackground":"var(--ch-16)","tab.inactiveBackground":"var(--ch-21)","tab.activeForeground":"var(--ch-4)","tab.inactiveForeground":"var(--ch-15)","tab.border":"var(--ch-22)","tab.activeBorder":"var(--ch-16)","tab.activeBorderTop":"var(--ch-23)","tab.hoverBackground":"var(--ch-16)","tab.hoverForeground":"var(--ch-15)","editorGroupHeader.tabsBorder":"var(--ch-22)","editorGroupHeader.tabsBackground":"var(--ch-21)","list.inactiveSelectionBackground":"var(--ch-24)","list.inactiveSelectionForeground":"var(--ch-4)","list.hoverBackground":"var(--ch-25)","list.hoverForeground":"var(--ch-4)"}},lineNumbers:!0,showCopyButton:!0,autoImport:!0,skipLanguages:[],filepath:"/Users/saleemfareed/Documents/hal-docs/apps/docs/pages/guides/getting-started/tutorials/multisig-utxos.mdx"},a={id:"multisig-utxos",title:"Multisig UTXOs with DijetsJs",description:"Multisig Unspent Transaction Outputs.",sidebar_label:"Multisig UTXOs"},h=function(o){var t=o.children;return(0,r.jsx)(c.Z,{meta:a,children:t})},i=h;function v(o){var t=Object.assign({h1:"h1",p:"p",img:"img",h2:"h2",code:"code",strong:"strong",ul:"ul",li:"li",a:"a",h3:"h3"},(0,n.ah)(),o.components);return l||y("CH",!1),l.Code||y("CH.Code",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(t.p,{children:"An account on a chain that follows the UTXO model much like Bitcoin doesn't have the\ncommonly found parameter like balance. Instead the UTXO Model has a series of outputs\nthat are generated directly by virtue of the previous transactions. Each output has some amount of asset associated with them. These\noutputs can have 1 or multiple owners. The owners are basically the account\naddresses that can consume this output."}),"\n",(0,r.jsx)(t.p,{children:"The outputs are the result of a transaction that can be spent by the owner of\nthat output. For example, an account has 3 outputs that it can spend, and hence\nare currently unspent. That is why we call them Unspent Transaction Outputs\n(UTXOs). So it is better to use the term unspent outputs rather than just\noutputs. Similarly, we add the amount in the UTXOs owned by an address to\ncalculate its balance. Signing a transaction basically adds the signature of the\nUTXO owners included in the inputs."}),"\n",(0,r.jsx)(t.p,{children:"Suppose, account Alice wants to send 1.3 DJTX to account Bob, then it has to include all\nthose unspent outputs in a transaction, that are owned by Alice at that point and whose sum of\namounts in those outputs is more than or equal to 1.3. These UTXOs will be\nincluded as inputs in a transaction. Account Alice also has to create outputs with\namount 1.3 and the owner being the receiver i.e Bob. There could be multiple\noutputs in the outputs array. This means, that using these UTXOs, we can create\nmultiple outputs with different amounts to different addresses."}),"\n",(0,r.jsx)(t.p,{children:"Once the transaction is committed, the UTXOs in the inputs will be consumed and\noutputs will become new UTXOs for the receiver. If the inputs have more amount\nunlocked than being consumed by the outputs, then the excess amount will be\nburned as fees. Therefore, we should also create a change output which will be\nassigned to us, if there is an excess amount in the input. In the diagram given\nbelow, a total of 1.72 DJTX is getting unlocked in inputs, therefore we have\nalso created a change output for the excess amount (0.41 DJTX) to the sender's\naddress. The remaining amount after being consumed by the outputs like\nreceiver's and change output, is burned as fees (0.01 DJTX)."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"/docs/img/multi-utxos-djtx.png",alt:"multisig UTXOs 1"})}),"\n",(0,r.jsx)(t.h2,{id:"multi-signature-utxos",children:"Multi-Signature UTXOs"}),"\n",(0,r.jsxs)(t.p,{children:["UTXOs can be associated with multiple addresses. If there are multiple owners of\na UTXO, then we must note the ",(0,r.jsx)(t.code,{children:"threshold"})," value. We have to include signatures\nof a threshold number of UTXO owners with the unsigned transaction to consume\nUTXOs present in the inputs. The threshold value of a UTXO is set while issuing\nthe transaction."]}),"\n",(0,r.jsx)(t.p,{children:"We can use these multi-sig UTXOs as inputs for multiple purposes and not only\nfor sending assets. For example, we can use them to create Subnets, add\ndelegators, add validators, etc."}),"\n",(0,r.jsx)(t.h2,{id:"atomic-transactions",children:"Atomic Transactions"}),"\n",(0,r.jsxs)(t.p,{children:["On Dijets, we can even create cross-chain outputs. This means that we can do\na native cross-chain transfer of assets. These are made possible through\n",(0,r.jsx)(t.strong,{children:"Atomic Transactions"}),". This is a 2-step process -"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Export transaction on source chain"}),"\n",(0,r.jsx)(t.li,{children:"Import transactions on the destination chain"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Atomic transactions are similar to other transactions. We use UTXOs of the\nsource chain as inputs and create outputs owned by destination chain addresses.\nWhen the export transactions are issued, the newly created UTXOs stay in the\n",(0,r.jsx)(t.strong,{children:"Exported Atomic Memory"}),". These are neither on the source chain nor on the\ndestination chain. These UTXOs can only be used as inputs by their owners on the\ndestination chain while making import transactions. Using these UTXOs on the\natomic memory, we can create multiple outputs with different amounts or\naddresses."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"/docs/img/multi-utxos-djtx2.png",alt:"multisig UTXOs 1"})}),"\n",(0,r.jsx)(t.h2,{id:"utxos-on-utility-chain",children:"UTXOs on Utility Chain"}),"\n",(0,r.jsx)(t.p,{children:"Dijets Utility Chain is an instance of Ethereum Virtual Machine. Unlike the Value and Method Chain, UTXOs can't be\ncreated on Utility Chain to do regular transactions because Utility Chain follows\nthe account-based approach of Ethereum. In Utility Chain, each address (account) is mapped with\nits balance, and the assets are transferred simply by adding and subtracting\nfrom this balance using the virtual machine."}),"\n",(0,r.jsx)(t.p,{children:"But we can export UTXOs with one or multiple owners to Utility Chain and then import\nthem by signing the transaction with the qualified spenders containing those\nUTXOs as inputs. The output on Utility Chain can only have a single owner (a\nhexadecimal address). Similarly while exporting from Utility Chain to other chains, we\ncan have multiple owners for the output, but input will be signed only by the\naccount whose balance is getting used."}),"\n",(0,r.jsx)(t.h2,{id:"getting-hands-on-multi-signature-utxos",children:"Getting Hands-on Multi-Signature UTXOs"}),"\n",(0,r.jsx)(t.p,{children:"Next, we will make utility and other helpful functions, so that, we can use them\nto create multi-sig UTXOs and spend them with ease. These functions will extract\ncommon steps into a function so that we do not have to follow each step every\ntime we are issuing a transaction."}),"\n",(0,r.jsx)(t.h2,{id:"setting-up-project",children:"Setting Up Project"}),"\n",(0,r.jsxs)(t.p,{children:["Make a new directory ",(0,r.jsx)(t.code,{children:"multisig"})," for keeping all the project codes and move\nthere. First, let's install the required dependencies."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"npm ",props:{style:{color:"var(--ch-3)"}}},{content:"install ",props:{style:{color:"var(--ch-8)"}}},{content:"--save ",props:{style:{color:"var(--ch-2)"}}},{content:"dijets dotenv",props:{style:{color:"var(--ch-8)"}}}]}],lang:"bash"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Now create a configuration file named ",(0,r.jsx)(t.code,{children:"config.js"})," for storing all the pieces of\ninformation regarding the network and chain we are connecting to. Since we are\nmaking transactions on the Dijets TestNet, its network ID is 5. You can change the\nconfiguration according to the network you are using."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dotenv"',props:{style:{color:"var(--ch-8)"}}},{content:").",props:{style:{color:"var(--ch-4)"}}},{content:"config",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"module",props:{style:{color:"var(--ch-2)"}}},{content:".",props:{style:{color:"var(--ch-4)"}}},{content:"exports ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  protocol: ",props:{style:{color:"var(--ch-4)"}}},{content:'"https"',props:{style:{color:"var(--ch-8)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ip: ",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets.ukwest.cloudapp.azure.com"',props:{style:{color:"var(--ch-8)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  port: ",props:{style:{color:"var(--ch-4)"}}},{content:"443",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID: ",props:{style:{color:"var(--ch-4)"}}},{content:"5",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  privateKeys: ",props:{style:{color:"var(--ch-4)"}}},{content:"JSON",props:{style:{color:"var(--ch-2)"}}},{content:".",props:{style:{color:"var(--ch-4)"}}},{content:"parse",props:{style:{color:"var(--ch-5)"}}},{content:"(process.env.",props:{style:{color:"var(--ch-4)"}}},{content:"PRIVATEKEYS",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  mnemonic: process.env.",props:{style:{color:"var(--ch-4)"}}},{content:"MNEMONIC",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Create an ",(0,r.jsx)(t.code,{children:".env"})," file for storing sensitive information which we can't make\npublic like the private keys or the mnemonic. Here are the sample private keys,\nwhich you should not use. You can create a new account on ",(0,r.jsx)(t.a,{href:"https://wallet.dijets.io",children:"Dijets\nWallet"})," and paste the mnemonic here for\ndemonstration."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIVATEKEYS=`[",props:{}}]},{tokens:[{content:'    "PrivateKey-ewoqjP7PxY4yr3iLTpLisriqt94hdyDFNgchSxGGztUrTXtNN",',props:{}}]},{tokens:[{content:'    "PrivateKey-R6e8f5QSa89DjpvL9asNdhdJ4u8VqzMJStPV8VVdDmLgPd8a4"',props:{}}]},{tokens:[{content:"]`",props:{}}]},{tokens:[{content:'MNEMONIC="apple chair appear..."',props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,r.jsx)(t.h2,{id:"setting-up-apis-and-keychains",children:"Setting Up APIs and Keychains"}),"\n",(0,r.jsxs)(t.p,{children:["Create a file ",(0,r.jsx)(t.code,{children:"importAPI.js"})," for importing and setting up all the necessary\nAPIs, Keychains, addresses, etc. Now paste the following snippets into the file."]}),"\n",(0,r.jsx)(t.h3,{id:"importing-dependencies-and-configurations",children:"Importing Dependencies and Configurations"}),"\n",(0,r.jsx)(t.p,{children:"We need dependencies like the DijetsJs module and other configurations. Let's import them at the top."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"Dijets",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"BinTools",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"BN",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"Web3 ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"web3"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"MnemonicHelper ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/utils/mnemonic"',props:{style:{color:"var(--ch-8)"}}},{content:").default",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"HDNode ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/utils/hdnode"',props:{style:{color:"var(--ch-8)"}}},{content:").default",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"privateToAddress",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"ethereumjs-util"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// Importing node details and Private key from the config file.",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ip",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  port",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  protocol",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  privateKeys",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  mnemonic",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"./config.js"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"let",props:{style:{color:"var(--ch-7)"}}},{content:" { djtxAssetID, chainIDs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"./constants.js"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// For encoding and decoding to CB58 and buffers.",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"bintools ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" BinTools.",props:{style:{color:"var(--ch-4)"}}},{content:"getInstance",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"setup-dijets-apis",children:"Setup Dijets APIs"}),"\n",(0,r.jsx)(t.p,{children:"To make API calls to the Dijets network and to its Ternary Chain Ledgers of\nValue Chain, Method Chain and Utility Chain, let's set up these by adding the following code\nsnippets."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// Dijets instance",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"dijets ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"Dijets",props:{style:{color:"var(--ch-5)"}}},{content:"(ip, port, protocol, networkID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"nodeURL ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"`${",props:{style:{color:"var(--ch-8)"}}},{content:"protocol",props:{style:{color:"var(--ch-4)"}}},{content:"}://${",props:{style:{color:"var(--ch-8)"}}},{content:"ip",props:{style:{color:"var(--ch-4)"}}},{content:"}:${",props:{style:{color:"var(--ch-8)"}}},{content:"port",props:{style:{color:"var(--ch-4)"}}},{content:"}/ext/bc/C/rpc`",props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"web3 ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"Web3",props:{style:{color:"var(--ch-5)"}}},{content:"(nodeURL)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// Method and Djtx API",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"platform ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" dijets.",props:{style:{color:"var(--ch-4)"}}},{content:"MethodChain",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"djtx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" dijets.",props:{style:{color:"var(--ch-4)"}}},{content:"ValueChain",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"evm ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" dijets.",props:{style:{color:"var(--ch-4)"}}},{content:"UtilityChain",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"setup-keychains-with-private-keys",children:"Setup Keychains with Private Keys"}),"\n",(0,r.jsx)(t.p,{children:"In order to sign transactions with our private keys, we will use the DijetsJs\nkeychain API. This will locally store our private keys and can be easily used\nfor signing."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// Keychain for signing transactions",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"keyChains ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  x: djtx.",props:{style:{color:"var(--ch-4)"}}},{content:"keyChain",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  p: platform.",props:{style:{color:"var(--ch-4)"}}},{content:"keyChain",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  c: evm.",props:{style:{color:"var(--ch-4)"}}},{content:"keyChain",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"function ",props:{style:{color:"var(--ch-7)"}}},{content:"importPrivateKeys",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"privKey",props:{style:{color:"var(--ch-3)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains.x.",props:{style:{color:"var(--ch-4)"}}},{content:"importKey",props:{style:{color:"var(--ch-5)"}}},{content:"(privKey)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains.p.",props:{style:{color:"var(--ch-4)"}}},{content:"importKey",props:{style:{color:"var(--ch-5)"}}},{content:"(privKey)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains.c.",props:{style:{color:"var(--ch-4)"}}},{content:"importKey",props:{style:{color:"var(--ch-5)"}}},{content:"(privKey)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"We can either use mnemonic phrases to derive private keys from it or simply use just the private key for importing keys into the keychain. We can use the following\nfunction to get private keys from the mnemonic and address index which we want.\nFor the purpose of this guide, we will use addresses at index 0 and 1."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"function ",props:{style:{color:"var(--ch-7)"}}},{content:"getPrivateKey",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"mnemonic",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"activeIndex ",props:{style:{color:"var(--ch-3)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"mnemonicHelper ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"MnemonicHelper",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"seed ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" mnemonicHelper.",props:{style:{color:"var(--ch-4)"}}},{content:"mnemonicToSeedSync",props:{style:{color:"var(--ch-5)"}}},{content:"(mnemonic)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"hdNode ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"HDNode",props:{style:{color:"var(--ch-5)"}}},{content:"(seed)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"dijetsPath ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"`m/44'/120'/0'/0/${",props:{style:{color:"var(--ch-8)"}}},{content:"activeIndex",props:{style:{color:"var(--ch-4)"}}},{content:"}`",props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" hdNode.",props:{style:{color:"var(--ch-4)"}}},{content:"derive",props:{style:{color:"var(--ch-5)"}}},{content:"(dijetsPath).privateKeyCB58",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// importing keys in the key chain - use this if you have any private keys",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"// privateKeys.forEach((privKey) => {",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"// \timportPrivateKeys(privKey)",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"// })",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// importing private keys from mnemonic",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"importPrivateKeys",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"getPrivateKey",props:{style:{color:"var(--ch-5)"}}},{content:"(mnemonic, ",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"importPrivateKeys",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"getPrivateKey",props:{style:{color:"var(--ch-5)"}}},{content:"(mnemonic, ",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"setup-addresses-and-chain-ids",children:"Setup Addresses and Chain IDs"}),"\n",(0,r.jsxs)(t.p,{children:["For creating transactions we might need addresses of different formats like\n",(0,r.jsx)(t.code,{children:"Buffer"})," or ",(0,r.jsx)(t.code,{children:"Bech32"})," etc. And to make issue transactions on different chains we\nneed their ",(0,r.jsx)(t.code,{children:"chainID"}),". Paste the following snippet to achieve the same."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// Buffer representation of addresses",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"addresses ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  x: keyChains.x.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddresses",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  p: keyChains.p.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddresses",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  c: keyChains.c.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddresses",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// String representation of addresses",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"addressStrings ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  x: keyChains.x.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddressStrings",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  p: keyChains.p.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddressStrings",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  c: keyChains.c.",props:{style:{color:"var(--ch-4)"}}},{content:"getAddressStrings",props:{style:{color:"var(--ch-5)"}}},{content:"(),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"djtxAssetID ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" bintools.",props:{style:{color:"var(--ch-4)"}}},{content:"cb58Decode",props:{style:{color:"var(--ch-5)"}}},{content:"(djtxAssetID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"chainIDs ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  x: bintools.",props:{style:{color:"var(--ch-4)"}}},{content:"cb58Decode",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.x),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  p: bintools.",props:{style:{color:"var(--ch-4)"}}},{content:"cb58Decode",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.p),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  c: bintools.",props:{style:{color:"var(--ch-4)"}}},{content:"cb58Decode",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.c),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// Exporting these for other files to use",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"module",props:{style:{color:"var(--ch-2)"}}},{content:".",props:{style:{color:"var(--ch-4)"}}},{content:"exports ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  platform,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtx,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  evm,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  bintools,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  web3,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"We can use the above-exported variables and APIs from other files as required."}),"\n",(0,r.jsx)(t.h2,{id:"creating-utility-functions",children:"Creating Utility Functions"}),"\n",(0,r.jsxs)(t.p,{children:["While creating multi-sig transactions, we have a few things in common, like\ncreating inputs with the UTXOs, creating outputs, and adding signature indexes.\nSo let's create a file named ",(0,r.jsx)(t.code,{children:"utils.js"})," and paste the following snippets that we\ncan call every time we want to do a repetitive task."]}),"\n",(0,r.jsx)(t.h3,{id:"getting-dependencies",children:"Getting Dependencies"}),"\n",(0,r.jsx)(t.p,{children:"Inputs and outputs are an array of transferable input and transferable output.\nThese contain transfer inputs and associated assetID which is being transferred.\nThere are different types of transfer inputs/outputs for sending assets, minting\nassets, minting NFTs, etc."}),"\n",(0,r.jsxs)(t.p,{children:["We will be using ",(0,r.jsx)(t.code,{children:"SECPTransferInput/SECPTransferOutput"})," for sending our assets."]}),"\n",(0,r.jsxs)(t.p,{children:["But since we can't use UTXOs on Dijets EVM instance, the Utility Chain, we cannot directly import them either.\nTherefore we need to create a different type of input/output for them called\n",(0,r.jsx)(t.code,{children:"EVMInput/EVMOutput"}),"."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"BN",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"web3",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"./importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"let",props:{style:{color:"var(--ch-7)"}}},{content:" SECPTransferInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  TransferableInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  SECPTransferOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  TransferableOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  EVMInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  EVMOutput",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"getTransferClass ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"chainID",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" vm ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'""',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.x) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    vm ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'"avm"',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"else if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.p) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    vm ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'"platformvm"',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"else if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.c) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    vm ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'"evm"',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" ({",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    SECPTransferInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    TransferableInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    SECPTransferOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    TransferableOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    EVMInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    EVMOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    index,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"`dijets/dist/apis/${",props:{style:{color:"var(--ch-8)"}}},{content:"vm",props:{style:{color:"var(--ch-4)"}}},{content:"}/index`",props:{style:{color:"var(--ch-8)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Different chains have their own implementation of TransferInput/Output classes.\nTherefore we need to update the required modules according to the chain we\nissuing transactions on. To make it more modular, we created a\n",(0,r.jsx)(t.code,{children:"getTransferClass()"})," function, that will take ",(0,r.jsx)(t.code,{children:"chainID"})," and import modules as\nrequired."]}),"\n",(0,r.jsx)(t.h3,{id:"creating-transferable-output",children:"Creating Transferable Output"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createOutput()"})," function will create and return the transferable output\naccording to arguments amount, assetID, owner addresses, lock time, and\nthreshold. Lock time represents the timestamp after which this output could be\nspent. Mostly this parameter will be 0."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"createOutput ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"amount",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"assetID",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"addresses",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"locktime",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"threshold",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" transferOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"SECPTransferOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    amount,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    locktime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    threshold",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return new ",props:{style:{color:"var(--ch-7)"}}},{content:"TransferableOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(assetID, transferOutput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"creating-transferable-input",children:"Creating Transferable Input"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createInput()"})," function will create and return transferable input. Input\nrequire arguments like amount in the UTXO, and arguments which identify that\nUTXO, like txID of the transaction which the UTXO was the output of, ",(0,r.jsx)(t.code,{children:"outputIndex"}),"\n(index of the output in that TX), and qualified signatures (output spenders\nwhich are present in our keychain) whose signature will be required while\nsigning this transaction."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"createInput ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  amount",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  txID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  outputIndex",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  assetID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  spenders",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  threshold",props:{style:{color:"var(--ch-3)"}}}]},{tokens:[{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creating transfer input",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" transferInput ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"SECPTransferInput",props:{style:{color:"var(--ch-5)"}}},{content:"(amount)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // adding threshold signatures",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  addSignatureIndexes",props:{style:{color:"var(--ch-5)"}}},{content:"(spenders, threshold, transferInput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creating transferable input",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  return new ",props:{style:{color:"var(--ch-7)"}}},{content:"TransferableInput",props:{style:{color:"var(--ch-5)"}}},{content:"(txID, outputIndex, assetID, transferInput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"add-signature-indexes",children:"Add Signature Indexes"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createSignatureIndexes()"})," function will add spender addresses along with an\nindex for each address in the transfer input. While signing the unsigned\ntransaction, these signature indexes will be used."]}),"\n",(0,r.jsxs)(t.p,{children:["By adding signature indexes we are not signing the inputs but just adding a\nplaceholder of the address at a particular index whose signature is required\nwhen we call the ",(0,r.jsx)(t.code,{children:".sign()"})," function on the unsigned transactions. Once the\nthreshold spender addresses are added, it will exit."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"addSignatureIndexes ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"addresses",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"threshold",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"input",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" sigIndex ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"  addresses.",props:{style:{color:"var(--ch-4)"}}},{content:"every",props:{style:{color:"var(--ch-5)"}}},{content:"((",props:{style:{color:"var(--ch-4)"}}},{content:"address",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    if",props:{style:{color:"var(--ch-7)"}}},{content:" (threshold ",props:{style:{color:"var(--ch-4)"}}},{content:"> ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      input.",props:{style:{color:"var(--ch-4)"}}},{content:"addSignatureIdx",props:{style:{color:"var(--ch-5)"}}},{content:"(sigIndex, address)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      sigIndex",props:{style:{color:"var(--ch-4)"}}},{content:"++",props:{style:{color:"var(--ch-7)"}}}]},{tokens:[{content:"      threshold",props:{style:{color:"var(--ch-4)"}}},{content:"--",props:{style:{color:"var(--ch-7)"}}}]},{tokens:[{content:"      return ",props:{style:{color:"var(--ch-7)"}}},{content:"true",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"    } ",props:{style:{color:"var(--ch-4)"}}},{content:"else",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      return ",props:{style:{color:"var(--ch-7)"}}},{content:"false",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"    }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  })",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"create-evm-input",children:"Create EVM Input"}),"\n",(0,r.jsxs)(t.p,{children:["As explained earlier, we do not have UTXOs on Utility Chain. Therefore we cannot make\nregular inputs. The following function ",(0,r.jsx)(t.code,{children:"createEVMInput()"})," will create the\nrequired input and add a signature index corresponding to the address specified\nin the input."]}),"\n",(0,r.jsxs)(t.p,{children:["EVM Inputs are required when we want to export assets from Utility Chain. In the\nfollowing function, ",(0,r.jsx)(t.code,{children:"addresses"})," is the array of Buffer addresses but for\n",(0,r.jsx)(t.code,{children:"Utility Chain Export Transactions"}),", a hex address is also appended at last."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"createEVMInput ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"amount",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"addresses",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"assetID",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"nonce",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"hexAddress ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" addresses.",props:{style:{color:"var(--ch-4)"}}},{content:"at",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"-",props:{style:{color:"var(--ch-7)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"evmInput ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"EVMInput",props:{style:{color:"var(--ch-5)"}}},{content:"(hexAddress, amount, assetID, nonce)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  evmInput.",props:{style:{color:"var(--ch-4)"}}},{content:"addSignatureIdx",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:", addresses[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"])",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" evmInput",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"create-evm-output",children:"Create EVM Output"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createEVMOutput()"})," function will create EVM output for importing assets on Utility Chain."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"createEVMOutput ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"amount",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"hexAddress",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"assetID",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return new ",props:{style:{color:"var(--ch-7)"}}},{content:"EVMOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(hexAddress, amount, assetID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"update-transfer-class",children:"Update Transfer Class"}),"\n",(0,r.jsxs)(t.p,{children:["Let's make a small function that will call the ",(0,r.jsx)(t.code,{children:"getTransferClass()"})," according to the ",(0,r.jsx)(t.code,{children:"chainID"}),"."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"updateTransferClass ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"chainID",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    SECPTransferInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      TransferableInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      SECPTransferOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      TransferableOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      EVMInput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      EVMOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      (index ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"getTransferClass",props:{style:{color:"var(--ch-5)"}}},{content:"(chainID))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"add-utxos-to-inputs",children:"Add UTXOs to Inputs"}),"\n",(0,r.jsxs)(t.p,{children:["We have ",(0,r.jsx)(t.code,{children:"inputs"})," as an array of UTXOs that will be consumed in the transaction.\nThe ",(0,r.jsx)(t.code,{children:"updateInputs()"})," function will take UTXOs, ",(0,r.jsx)(t.code,{children:"addresses"})," whose credentials we\nhave for signing, ",(0,r.jsx)(t.code,{children:"assetID"})," and ",(0,r.jsx)(t.code,{children:"toBeUnlocked"})," that is amount we want to consume.\n",(0,r.jsx)(t.code,{children:"toBeUnlocked"})," contains everything we want to consume including transfer amount,\nfees, stake amount (if any), etc."]}),"\n",(0,r.jsxs)(t.p,{children:["We also have a special variable ",(0,r.jsx)(t.code,{children:"C"}),", that will indicate the type of transaction\nwhich is associated with the Utility Chain. This is required because -"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Export from Utility Chain (C.export == true) - These types of transactions cannot\nhave UTXOs as inputs and therefore ",(0,r.jsx)(t.code,{children:"EVMInput"})," is created."]}),"\n",(0,r.jsxs)(t.li,{children:["Import to Utility Chain (C.import == true) - The outputs imported on Utility Chain from exported UTXOs are ",(0,r.jsx)(t.code,{children:"EVMOutput"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["It will create inputs with the passed UTXOs worth the ",(0,r.jsx)(t.code,{children:"toBeUnlocked"})," amount. But\nif there is a UTXO that when included, will surpass the ",(0,r.jsx)(t.code,{children:"toBeUnlocked"})," amount,\nthen it will create a change output with the qualified spenders as their new\nowners with the surpassed amount."]}),"\n",(0,r.jsxs)(t.p,{children:["This function will return the ",(0,r.jsx)(t.code,{children:"inputs"})," array containing all the unlocked UTXOs,\nchange transferable output, and the net balance included in these inputs. Now\nadd the following function snippet."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"updateInputs ",props:{style:{color:"var(--ch-5)"}}},{content:"= async",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  utxos",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  C",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  assetID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  toBeUnlocked",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainID",props:{style:{color:"var(--ch-3)"}}}]},{tokens:[{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // Getting transferable inputs according to chain id",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  updateTransferClass",props:{style:{color:"var(--ch-5)"}}},{content:"(chainID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" inputs ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    changeTransferableOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"undefined",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    netInputBalance ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".export) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    const ",props:{style:{color:"var(--ch-7)"}}},{content:"nonce ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" web3.eth.",props:{style:{color:"var(--ch-4)"}}},{content:"getTransactionCount",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses.",props:{style:{color:"var(--ch-4)"}}},{content:"at",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"-",props:{style:{color:"var(--ch-7)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    inputs.",props:{style:{color:"var(--ch-4)"}}},{content:"push",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"createEVMInput",props:{style:{color:"var(--ch-5)"}}},{content:"(toBeUnlocked, addresses, assetID, nonce))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"else",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    utxos.",props:{style:{color:"var(--ch-4)"}}},{content:"forEach",props:{style:{color:"var(--ch-5)"}}},{content:"((",props:{style:{color:"var(--ch-4)"}}},{content:"utxo",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      let",props:{style:{color:"var(--ch-7)"}}},{content:" output ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" utxo.",props:{style:{color:"var(--ch-4)"}}},{content:"getOutput",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        output.",props:{style:{color:"var(--ch-4)"}}},{content:"getOutputID",props:{style:{color:"var(--ch-5)"}}},{content:"() ",props:{style:{color:"var(--ch-4)"}}},{content:"=== ",props:{style:{color:"var(--ch-7)"}}},{content:"7 ",props:{style:{color:"var(--ch-2)"}}},{content:"&&",props:{style:{color:"var(--ch-7)"}}}]},{tokens:[{content:"        assetID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(utxo.",props:{style:{color:"var(--ch-4)"}}},{content:"getAssetID",props:{style:{color:"var(--ch-5)"}}},{content:"()) ",props:{style:{color:"var(--ch-4)"}}},{content:"=== ",props:{style:{color:"var(--ch-7)"}}},{content:"0 ",props:{style:{color:"var(--ch-2)"}}},{content:"&&",props:{style:{color:"var(--ch-7)"}}}]},{tokens:[{content:"        netInputBalance ",props:{style:{color:"var(--ch-4)"}}},{content:"<",props:{style:{color:"var(--ch-7)"}}},{content:" toBeUnlocked",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      ) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        let",props:{style:{color:"var(--ch-7)"}}},{content:" outputThreshold ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" output.",props:{style:{color:"var(--ch-4)"}}},{content:"getThreshold",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        // spenders which we have in our keychain",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"        let",props:{style:{color:"var(--ch-7)"}}},{content:" qualifiedSpenders ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" output.",props:{style:{color:"var(--ch-4)"}}},{content:"getSpenders",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        // create inputs only if we have custody of threshold or more number of utxo spenders",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"        if",props:{style:{color:"var(--ch-7)"}}},{content:" (outputThreshold ",props:{style:{color:"var(--ch-4)"}}},{content:"<=",props:{style:{color:"var(--ch-7)"}}},{content:" qualifiedSpenders.",props:{style:{color:"var(--ch-4)"}}},{content:"length",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" txID ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" utxo.",props:{style:{color:"var(--ch-4)"}}},{content:"getTxID",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" outputIndex ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" utxo.",props:{style:{color:"var(--ch-4)"}}},{content:"getOutputIdx",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" utxoAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" output.amountValue",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" outputLocktime ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" output.",props:{style:{color:"var(--ch-4)"}}},{content:"getLocktime",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          netInputBalance ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" netInputBalance.",props:{style:{color:"var(--ch-4)"}}},{content:"add",props:{style:{color:"var(--ch-5)"}}},{content:"(utxoAmount)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" excessAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" netInputBalance.",props:{style:{color:"var(--ch-4)"}}},{content:"sub",props:{style:{color:"var(--ch-5)"}}},{content:"(toBeUnlocked)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          // creating change transferable output",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"          if",props:{style:{color:"var(--ch-7)"}}},{content:" (excessAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"> ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"!",props:{style:{color:"var(--ch-7)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".import) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"              changeTransferableOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"createOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"                excessAmount,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"                assetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"                qualifiedSpenders,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"                outputLocktime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"                outputThreshold",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"              )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          // create transferable input",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"          let",props:{style:{color:"var(--ch-7)"}}},{content:" transferableInput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"createInput",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            utxoAmount,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            txID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            outputIndex,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            assetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            qualifiedSpenders,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"            outputThreshold",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"          inputs.",props:{style:{color:"var(--ch-4)"}}},{content:"push",props:{style:{color:"var(--ch-5)"}}},{content:"(transferableInput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    })",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, changeTransferableOutput }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Only those UTXOs will be included whose output ID is ",(0,r.jsx)(t.code,{children:"7"})," representing\n",(0,r.jsx)(t.code,{children:"SECPTransferOutput"}),". These outputs are used for transferring assets. Also, we\nare only including outputs containing ",(0,r.jsx)(t.code,{children:"DJTX"})," assets. These conditions are\nchecked in the following line -"]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"if",props:{style:{color:"var(--ch-7)"}}},{content:"(output.",props:{style:{color:"var(--ch-4)"}}},{content:"getOutputID",props:{style:{color:"var(--ch-5)"}}},{content:"() ",props:{style:{color:"var(--ch-4)"}}},{content:"=== ",props:{style:{color:"var(--ch-7)"}}},{content:"7 ",props:{style:{color:"var(--ch-2)"}}},{content:"&&",props:{style:{color:"var(--ch-7)"}}},{content:" assetID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(utxo.",props:{style:{color:"var(--ch-4)"}}},{content:"getAssetID",props:{style:{color:"var(--ch-5)"}}},{content:"()) ",props:{style:{color:"var(--ch-4)"}}},{content:"=== ",props:{style:{color:"var(--ch-7)"}}},{content:"0 ",props:{style:{color:"var(--ch-2)"}}},{content:"&&",props:{style:{color:"var(--ch-7)"}}},{content:" netInputBalance ",props:{style:{color:"var(--ch-4)"}}},{content:"<",props:{style:{color:"var(--ch-7)"}}},{content:" toBeUnlocked) {",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"The following part in the above function creates the change output if the total\nincluded balance surpasses the required amount and the transaction is not a\nUtility Chain export -"}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"netInputBalance ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" netInputBalance.",props:{style:{color:"var(--ch-4)"}}},{content:"add",props:{style:{color:"var(--ch-5)"}}},{content:"(utxoAmount)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"let",props:{style:{color:"var(--ch-7)"}}},{content:" excessAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" netInputBalance.",props:{style:{color:"var(--ch-4)"}}},{content:"sub",props:{style:{color:"var(--ch-5)"}}},{content:"(toBeUnlocked)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"// creating change transferable output",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"if",props:{style:{color:"var(--ch-7)"}}},{content:" (excessAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"> ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"!",props:{style:{color:"var(--ch-7)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".import) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    changeTransferableOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"createOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      excessAmount,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      assetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      qualifiedSpenders,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      outputLocktime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      outputThreshold",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"export-utility-functions",children:"Export Utility Functions"}),"\n",(0,r.jsx)(t.p,{children:"Now paste the following snippet to export these utility functions."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"module",props:{style:{color:"var(--ch-2)"}}},{content:".",props:{style:{color:"var(--ch-4)"}}},{content:"exports ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  createOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  createEVMOutput,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  updateInputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"All the utility functions are created."}),"\n",(0,r.jsx)(t.h2,{id:"create-inputs-and-outputs",children:"Create Inputs and Outputs"}),"\n",(0,r.jsx)(t.p,{children:"Let's create a function that will return the array of sufficient UTXOs stuffed\ninside an array and necessary outputs like send output, multi-sig output, evm\noutput, change output, etc. This function is basically a wrapper that\norchestrates the utility and other functions to generate inputs and outputs from\nparameters like addresses, asset id, chain id, output arguments (to, threshold\nand amount), etc."}),"\n",(0,r.jsxs)(t.p,{children:["Now make a new file ",(0,r.jsx)(t.code,{children:"createInputsAndOutputs.js"})," and paste the following snippets of code inside it."]}),"\n",(0,r.jsx)(t.h3,{id:"importing-dependencies",children:"Importing Dependencies"}),"\n",(0,r.jsx)(t.p,{children:"We need to import utility functions for creating outputs and inputs with the UTXOs."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"BN",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"djtx",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"platform",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"evm",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"bintools",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"./importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createOutput",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"createEVMOutput",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"updateInputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"./utils"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"EVMInput"})," should be used as inputs while creating an export transaction from\nUtility Chain and ",(0,r.jsx)(t.code,{children:"EVMOutput"})," should be used as outputs while creating an import\ntransaction on Utility Chain. To make it easier to decide when to do what, let's make\na function ",(0,r.jsx)(t.code,{children:"checkChain()"})," that will return an object ",(0,r.jsx)(t.code,{children:"C"})," (described earlier)."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"checkChain ",props:{style:{color:"var(--ch-5)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"chainID",props:{style:{color:"var(--ch-3)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"ownerAddress",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let ",props:{style:{color:"var(--ch-7)"}}},{content:"C ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    export: ",props:{style:{color:"var(--ch-4)"}}},{content:"false",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    import: ",props:{style:{color:"var(--ch-4)"}}},{content:"false",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.c) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"typeof",props:{style:{color:"var(--ch-7)"}}},{content:" ownerAddress ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:'"string" ',props:{style:{color:"var(--ch-8)"}}},{content:"&&",props:{style:{color:"var(--ch-7)"}}},{content:" bintools.",props:{style:{color:"var(--ch-4)"}}},{content:"isHex",props:{style:{color:"var(--ch-5)"}}},{content:"(ownerAddress)) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      C",props:{style:{color:"var(--ch-2)"}}},{content:".import ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"true",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"    } ",props:{style:{color:"var(--ch-4)"}}},{content:"else",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      C",props:{style:{color:"var(--ch-2)"}}},{content:".export ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"true",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"    }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return ",props:{style:{color:"var(--ch-7)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["For getting UTXOs from an address, let's make another function\n",(0,r.jsx)(t.code,{children:"getUnspentOutputs()"}),". This function will fetch UTXOs from a given address and\nsource chain. The ",(0,r.jsx)(t.code,{children:"sourceChain"})," will be used to fetch exported UTXOs that are\nnot yet imported. The exported outputs stay in the exported atomic memory. This\nparameter will only be used when we want to import assets."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// UTXOs for spending unspent outputs",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"getUnspentOutputs ",props:{style:{color:"var(--ch-5)"}}},{content:"= async",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  sourceChain ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"undefined",props:{style:{color:"var(--ch-2)"}}}]},{tokens:[{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" utxoSet",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.x) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    utxoSet ",props:{style:{color:"var(--ch-4)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" djtx.",props:{style:{color:"var(--ch-4)"}}},{content:"getUTXOs",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses, sourceChain)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"else if",props:{style:{color:"var(--ch-7)"}}},{content:" (chainID.",props:{style:{color:"var(--ch-4)"}}},{content:"compare",props:{style:{color:"var(--ch-5)"}}},{content:"(chainIDs.p) ",props:{style:{color:"var(--ch-4)"}}},{content:"== ",props:{style:{color:"var(--ch-7)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:") {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    utxoSet ",props:{style:{color:"var(--ch-4)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" platform.",props:{style:{color:"var(--ch-4)"}}},{content:"getUTXOs",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses, sourceChain)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" utxoSet.utxos.",props:{style:{color:"var(--ch-4)"}}},{content:"getAllUTXOs",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Now for organizing inputs and outputs and adding required signature indexes (not\nsignatures) for each unspent output, adding change output, etc, we will make a\n",(0,r.jsx)(t.code,{children:"createInputsAndOutputs()"})," function. Paste the following snippet next."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs ",props:{style:{color:"var(--ch-5)"}}},{content:"= async",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  assetID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainID",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  outputConfig",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  fee",props:{style:{color:"var(--ch-3)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  sourceChain",props:{style:{color:"var(--ch-3)"}}}]},{tokens:[{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" locktime ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let ",props:{style:{color:"var(--ch-7)"}}},{content:"C ",props:{style:{color:"var(--ch-2)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"checkChain",props:{style:{color:"var(--ch-5)"}}},{content:"(chainID, outputConfig[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"].owners)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" utxos ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" []",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".export) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.",props:{style:{color:"var(--ch-4)"}}},{content:"push",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"0x3b0e59fc2e9a82fa5eb3f042bc5151298e4f2cab"',props:{style:{color:"var(--ch-8)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"// getHexAddress(addresses[0])",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  } ",props:{style:{color:"var(--ch-4)"}}},{content:"else",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    utxos ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"getUnspentOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(addressStrings, chainID, sourceChain)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" toBeUnlocked ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" fee",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  outputConfig.",props:{style:{color:"var(--ch-4)"}}},{content:"forEach",props:{style:{color:"var(--ch-5)"}}},{content:"((",props:{style:{color:"var(--ch-4)"}}},{content:"output",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    toBeUnlocked ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" toBeUnlocked.",props:{style:{color:"var(--ch-4)"}}},{content:"add",props:{style:{color:"var(--ch-5)"}}},{content:"(output.amount)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  })",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // putting right utxos in the inputs",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, changeTransferableOutput } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"updateInputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    utxos,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    C",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    assetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    toBeUnlocked,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainID",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputs ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" []",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creating transferable outputs and transfer outputs",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  outputConfig.",props:{style:{color:"var(--ch-4)"}}},{content:"forEach",props:{style:{color:"var(--ch-5)"}}},{content:"((",props:{style:{color:"var(--ch-4)"}}},{content:"output",props:{style:{color:"var(--ch-3)"}}},{content:") ",props:{style:{color:"var(--ch-4)"}}},{content:"=>",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    let",props:{style:{color:"var(--ch-7)"}}},{content:" newOutput",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    if",props:{style:{color:"var(--ch-7)"}}},{content:" (",props:{style:{color:"var(--ch-4)"}}},{content:"!",props:{style:{color:"var(--ch-7)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".import) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      newOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"createOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        output.amount,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        assetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        output.owners,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        locktime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"        output.threshold",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    } ",props:{style:{color:"var(--ch-4)"}}},{content:"else",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      newOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"createEVMOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(output.amount, output.owners, assetID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputs.",props:{style:{color:"var(--ch-4)"}}},{content:"push",props:{style:{color:"var(--ch-5)"}}},{content:"(newOutput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  })",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // pushing change output (if any)",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  if",props:{style:{color:"var(--ch-7)"}}},{content:" (changeTransferableOutput ",props:{style:{color:"var(--ch-4)"}}},{content:"!= ",props:{style:{color:"var(--ch-7)"}}},{content:"undefined ",props:{style:{color:"var(--ch-2)"}}},{content:"&& !",props:{style:{color:"var(--ch-7)"}}},{content:"C",props:{style:{color:"var(--ch-2)"}}},{content:".import) {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputs.",props:{style:{color:"var(--ch-4)"}}},{content:"push",props:{style:{color:"var(--ch-5)"}}},{content:"(changeTransferableOutput)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  return",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"Output config is basically an array of all outputs that we want to create. This\nexcludes the change output because it will be automatically created. It has the\nfollowing structure."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"// Regular outputs",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:";[",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    amount: BigNumber,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    owners: [Buffer],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    threshold: Number,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"][",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // Import to Utility Chain",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    amount: BigNumber,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    owners: ",props:{style:{color:"var(--ch-4)"}}},{content:'"hex address string"',props:{style:{color:"var(--ch-8)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  }",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"]",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"You will learn about these arguments and how we can actually pass this along\nwith other arguments through the examples ahead."}),"\n",(0,r.jsx)(t.h3,{id:"exporting-functions",children:"Exporting Functions"}),"\n",(0,r.jsx)(t.p,{children:"Add the following snippet to export this function."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"module",props:{style:{color:"var(--ch-2)"}}},{content:".",props:{style:{color:"var(--ch-4)"}}},{content:"exports ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  createInputsAndOutputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"We have created all the utility and helper functions. You can use this project\nstructure to create different types of transactions like BaseTx, Export, Import,\nAddDelegator, etc. You should have the following files in your project now -"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:".env"})," - Secret file storing data like mnemonic and private keys"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"config.js"})," - Network information and parsed data from ",(0,r.jsx)(t.code,{children:".env"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"constants.js"})," - Asset and Chain specific static data"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"importAPI.js"})," - Import and setup apis, addresses and keychains"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"utils.js"})," - Utility functions for creating inputs and outputs"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"createInputsAndOutputs.js"})," - Wrapper of ",(0,r.jsx)(t.code,{children:"utility.js"})," for orchestrating utility functions."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Follow the next steps for ",(0,r.jsx)(t.strong,{children:"examples"})," and on how to use these functions."]}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(t.p,{children:["Now let's look at the examples for executing these transactions. For example, we\nwill create a separate ",(0,r.jsx)(t.code,{children:"examples"})," folder. In order to run the example scripts,\nyou must be in the root folder where all the environment variables and\nconfigurations are kept."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"node ",props:{style:{color:"var(--ch-3)"}}},{content:"examples/send.js",props:{style:{color:"var(--ch-8)"}}}]}],lang:"bash"},annotations:[]}]}),"\n",(0,r.jsx)(t.h2,{id:"multi-signature-base-tx-on-value-chain",children:"Multi-Signature Base TX on Value Chain"}),"\n",(0,r.jsxs)(t.p,{children:["Let's create a base transaction that converts a single-owner UTXO into a\nmulti-sig UTXO. The final UTXO can be used by new owners of the unspent output\nby adding their signatures for each output. Create a new file ",(0,r.jsx)(t.code,{children:"sendBaseTx.js"}),"\nand paste the following snippets."]}),"\n",(0,r.jsx)(t.h3,{id:"import-dependencies",children:"Import Dependencies"}),"\n",(0,r.jsxs)(t.p,{children:["Import the necessary dependencies like ",(0,r.jsx)(t.code,{children:"keyChains"}),", ",(0,r.jsx)(t.code,{children:"addresses"}),", ",(0,r.jsx)(t.code,{children:"utility"}),"\nfunctions, ",(0,r.jsx)(t.code,{children:"UnSignedTx"})," and ",(0,r.jsx)(t.code,{children:"BaseTx"})," classes etc."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtx",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"BaseTx",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/apis/avm/index"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../createMultisig"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"send-basetx",children:"Send BaseTx"}),"\n",(0,r.jsxs)(t.p,{children:["Now create the ",(0,r.jsx)(t.code,{children:"sendBaseTx()"})," function to be called for sending base TX to the network."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"async function ",props:{style:{color:"var(--ch-7)"}}},{content:"sendBaseTx",props:{style:{color:"var(--ch-5)"}}},{content:"() {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" memo ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" Buffer.",props:{style:{color:"var(--ch-4)"}}},{content:"from",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"Multisig Base Tx"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // unlock amount = sum(output amounts) + fee",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" fee ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e6",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creating outputs of 0.5 (multisig) and 0.1 DJTX - change output will be added by the function in the last",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"5e8",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: addresses.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e8",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: [addresses.x[",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"]],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addressStrings.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputConfig,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    fee",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"baseTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BaseTx",props:{style:{color:"var(--ch-5)"}}},{content:"(networkID, chainIDs.x, outputs, inputs, memo)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"unsignedTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-5)"}}},{content:"(baseTx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"tx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" unsignedTx.",props:{style:{color:"var(--ch-4)"}}},{content:"sign",props:{style:{color:"var(--ch-5)"}}},{content:"(keyChains.x)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"txID ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" djtx.",props:{style:{color:"var(--ch-4)"}}},{content:"issueTx",props:{style:{color:"var(--ch-5)"}}},{content:"(tx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  console.",props:{style:{color:"var(--ch-4)"}}},{content:"log",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"TxID:"',props:{style:{color:"var(--ch-8)"}}},{content:", txID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"We have created the BaseTx with the following output configuration -"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Multi-sig output of value 0.5 DJTX with threshold 2 and owners represented by\n",(0,r.jsx)(t.code,{children:"addresses.x"}),". The owners are basically an array of addresses in Buffer\nrepresentation."]}),"\n",(0,r.jsx)(t.li,{children:"Single owner output of value 0.1 DJTX."}),"\n"]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"5e8",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    owners: addresses.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e8",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    owners: [addresses.x[",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"]],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"]",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Let's discuss the arguments of ",(0,r.jsx)(t.code,{children:"createInputsAndOutputs()"})," in detail -"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"assetID"})," - ID of the asset involved in transaction"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"chainID"})," - ID of the chain on which this transaction will be issued"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"addresses"})," - Addresses buffer array whose UTXO will be consumed"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"addressStrings"})," - Addresses string array whose UTXO will be consumed"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"outputConfig"})," - Array of output object containing amount, owners and threshold"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"fee"})," - Fee for this transaction to be consumed in inputs"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"sourceChain"})," - Chain from which UTXOs will be fetched. Will take ",(0,r.jsx)(t.code,{children:"chainID"})," as default."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["In the above parameters, if ",(0,r.jsx)(t.code,{children:"fee"})," is less than the fees actually required for\nthat transaction, then there will be no surplus amount left by outputs over\ninputs because any surplus will be converted into a change output. This can\ncause transaction failure. So keep the fees in accordance with the transaction\nas mentioned ",(0,r.jsx)(t.a,{href:"../quickstart/transaction-fees.md#fee-schedule",children:"here"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Also, the ",(0,r.jsx)(t.code,{children:"sourceChain"})," parameter is required for fetching exported UTXOs that\ndo not exist yet on the destination chain. For non-export/import transactions,\nthis parameter is not required."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createInputsAndOutputs()"})," function will return ",(0,r.jsx)(t.code,{children:"inputs"})," and ",(0,r.jsx)(t.code,{children:"outputs"}),"\nrequired for any transaction. The last element of the outputs array would be\nchange output. And the order of other outputs will be the same as that in the\n",(0,r.jsx)(t.code,{children:"outputConfig"}),". Signature indexes corresponding to their owners are already\nincluded in the inputs. We can create an unsigned base transaction using the\n",(0,r.jsx)(t.code,{children:"BaseTx"})," and ",(0,r.jsx)(t.code,{children:"UnsignedTx"})," classes as shown above. The ",(0,r.jsx)(t.code,{children:".sign()"})," function\nbasically adds the required signatures from the keychain at the place indicated\nby signature indexes."]}),"\n",(0,r.jsxs)(t.p,{children:["Once the multi-sig UTXO is created, this UTXO can only be used if we have the\nthreshold signers in our keychain. The ",(0,r.jsx)(t.code,{children:"util"})," functions can be tweaked a little\nbit to create and return inputs with a part number of signers (less than the threshold). We\ncan then partially sign the inputs and ask other owners to add signature indices\nand sign."]}),"\n",(0,r.jsxs)(t.p,{children:["Now call the ",(0,r.jsx)(t.code,{children:"sendBaseTx()"})," function by adding this line"]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"sendBaseTx",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Run this file using ",(0,r.jsx)(t.code,{children:"node examples/sendBaseTx.js"}),", note the txID in the output,\nand look for it in the Dijets Unified explorer."]}),"\n",(0,r.jsx)(t.h2,{id:"export-multi-sig-utxo-from-x-to-method-chain",children:"Export Multi-Sig UTXO From X to Method Chain"}),"\n",(0,r.jsx)(t.p,{children:"Now we will look into exporting assets from the Value to Method Chain. It will be similar\nto the BaseTx example, with few differences in output ordering and cross-chain\nowner addresses."}),"\n",(0,r.jsxs)(t.p,{children:["Make a new file named ",(0,r.jsx)(t.code,{children:"exportXP.js"})," and paste the following snippets."]}),"\n",(0,r.jsx)(t.h3,{id:"import-dependencies-1",children:"Import Dependencies"}),"\n",(0,r.jsxs)(t.p,{children:["This time we will require ",(0,r.jsx)(t.code,{children:"ExportTx"})," instead of ",(0,r.jsx)(t.code,{children:"BaseTx"})," class."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtx",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"ExportTx",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/apis/avm/index"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../createMultisig"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"send-export-transaction",children:"Send Export Transaction"}),"\n",(0,r.jsxs)(t.p,{children:["Most of the things will be very much similar in this function. You can have a\nlook at ",(0,r.jsx)(t.code,{children:"outputConfig"}),", which creates a multi-sig output for addresses on\nMethod Chain. These addresses will be required for signing ",(0,r.jsx)(t.code,{children:"importTx"})," on Method Chain."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"fee"})," here will only be for exporting the asset. The import fees will be\ndeducted from the UTXOs present on the ",(0,r.jsx)(t.strong,{children:"Exported Atomic Memory"}),", a memory\nlocation where UTXOs lie after getting exported but before being imported. If\nthere is only a single UTXO, then it will be deducted from it."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"async function ",props:{style:{color:"var(--ch-7)"}}},{content:"exportXP",props:{style:{color:"var(--ch-5)"}}},{content:"() {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" memo ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" Buffer.",props:{style:{color:"var(--ch-4)"}}},{content:"from",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"Multisig Export Tx"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // consuming amount = sum(output amount) + fee",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" fee ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e6",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creates mutlti-sig (0.1 DJTX) and single-sig (0.03 DJTX) output for exporting to P Address (0.001 DJTX will be fees)",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"3e6",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: [addresses.p[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"]],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e8",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: addresses.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // importing fees will be deducted from these our other outputs in the exported output memory",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addressStrings.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputConfig,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    fee",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // outputs at index 0 and 1 are to be exported",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"exportTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"ExportTx",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    networkID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    [outputs.",props:{style:{color:"var(--ch-4)"}}},{content:"at",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"-",props:{style:{color:"var(--ch-7)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:")],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    inputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    memo,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    [outputs[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"], outputs[",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"]]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"unsignedTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-5)"}}},{content:"(exportTx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"tx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" unsignedTx.",props:{style:{color:"var(--ch-4)"}}},{content:"sign",props:{style:{color:"var(--ch-5)"}}},{content:"(keyChains.x)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"txID ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" djtx.",props:{style:{color:"var(--ch-4)"}}},{content:"issueTx",props:{style:{color:"var(--ch-5)"}}},{content:"(tx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  console.",props:{style:{color:"var(--ch-4)"}}},{content:"log",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"TxID:"',props:{style:{color:"var(--ch-8)"}}},{content:", txID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Another point to note is how inputs, outputs, and ",(0,r.jsx)(t.code,{children:"exportedOutputs"})," are passed here."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Inputs are as usual passed for the ",(0,r.jsx)(t.code,{children:"ins"})," parameter of the ",(0,r.jsx)(t.code,{children:"ExportTx"})," class."]}),"\n",(0,r.jsxs)(t.li,{children:["But only ",(0,r.jsx)(t.code,{children:"outputs. at(-1)"})," representing change output (last element) is passed\nin place of the usual ",(0,r.jsx)(t.code,{children:"outs"})," parameter."]}),"\n",(0,r.jsxs)(t.li,{children:["The last parameter of this class is ",(0,r.jsx)(t.code,{children:"exportedOuts"}),", representing the outputs that\nwill be exported from this chain to ",(0,r.jsx)(t.code,{children:"destinationChain"})," (2nd last parameter)."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"All these inputs and outputs are array, and hence con contains multiple outputs\nor inputs. But you have to manage which output should be passed where."}),"\n",(0,r.jsx)(t.p,{children:"Call the function by adding the below function call."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"exportXP",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Run this file using ",(0,r.jsx)(t.code,{children:"node examples/exportXP.js"}),". A transaction ID is generated upon successful execution."]}),"\n",(0,r.jsxs)(t.p,{children:["In the above image, we are consuming UTXO with the amount ",(0,r.jsx)(t.code,{children:"0.486..."}),", and\ngenerating outputs with the amount ",(0,r.jsx)(t.code,{children:"0.382..."})," (change output) and ",(0,r.jsx)(t.code,{children:"0.003"})," and\n",(0,r.jsx)(t.code,{children:"0.1"})," (exported output). The remaining ",(0,r.jsx)(t.code,{children:"0.001"})," is burned as transaction fees."]}),"\n",(0,r.jsx)(t.h2,{id:"import-multi-sig-utxo-from-x-to-method-chain",children:"Import Multi-Sig UTXO From X to Method Chain"}),"\n",(0,r.jsxs)(t.p,{children:["After exporting the UTXOs from the source chain, it stays in the exported atomic\nmemory that is these are neither on the source chain nor on the destination chain.\nPaste the following snippets into a new file ",(0,r.jsx)(t.code,{children:"importP.js"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"import-dependencies-2",children:"Import Dependencies"}),"\n",(0,r.jsxs)(t.p,{children:["We will require ",(0,r.jsx)(t.code,{children:"ImportTx"})," from PlatformVM APIs."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  platform",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"ImportTx",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/apis/platformvm/index"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../createMultisig"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"send-import-transaction",children:"Send Import Transaction"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"importP()"})," is a simple function that will use UTXOs on the exported atomic\nmemory as its inputs and create an output on the Method Chain addresses. You can\nchange the output config's owners and amount as per your need."]}),"\n",(0,r.jsxs)(t.p,{children:["An important point to note here is that all UTXOs that are included in this\n",(0,r.jsx)(t.code,{children:"importTx"})," will be transferred to the destination chain. Even if the import\namount is less than the amount in the UTXO, it will be sent to the qualified\nspender on the destination chain as a change output."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"async function ",props:{style:{color:"var(--ch-7)"}}},{content:"importP",props:{style:{color:"var(--ch-5)"}}},{content:"() {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" memo ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" Buffer.",props:{style:{color:"var(--ch-4)"}}},{content:"from",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"Multisig Import Tx"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // Use this parameter if you have UTXOs exported from other chains - only exported outputs will be fetched",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" sourceChain ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'"Value"',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // unlock amount = sum(output amount) + fee",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" fee ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e6",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e6",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: addresses.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e2",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: addresses.p[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // all the inputs here are the exported ones due to source chain parameter",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addressStrings.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputConfig,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    fee,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    sourceChain",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"importTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"ImportTx",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    networkID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    [],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    memo,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    inputs",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"unsignedTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-5)"}}},{content:"(importTx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"tx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" unsignedTx.",props:{style:{color:"var(--ch-4)"}}},{content:"sign",props:{style:{color:"var(--ch-5)"}}},{content:"(keyChains.x)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"txID ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" platform.",props:{style:{color:"var(--ch-4)"}}},{content:"issueTx",props:{style:{color:"var(--ch-5)"}}},{content:"(tx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  console.",props:{style:{color:"var(--ch-4)"}}},{content:"log",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"TxID:"',props:{style:{color:"var(--ch-8)"}}},{content:", txID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["In the above image, we are consuming the above exported UTXOs with amounts\n",(0,r.jsx)(t.code,{children:"0.003"})," and ",(0,r.jsx)(t.code,{children:"0.1"}),", and generating outputs with amount ",(0,r.jsx)(t.code,{children:"0.092..."})," (change output\nimported on Method Chain) and 2 ",(0,r.jsx)(t.code,{children:"0.005"})," imported outputs (1 multi-sig and 1\nsingle-sig). The remaining ",(0,r.jsx)(t.code,{children:"0.001"})," is burned as transaction fees."]}),"\n",(0,r.jsx)(t.h2,{id:"import-multi-sig-utxo-from-x-to-utility-chain",children:"Import Multi-Sig UTXO From X to Utility Chain"}),"\n",(0,r.jsxs)(t.p,{children:["This transaction will also be similar to other atomic transactions, except for\nthe ",(0,r.jsx)(t.code,{children:"outputConfig"})," parameter. You can easily get the idea by looking at the code\nbelow. Before you can run this example, there must be exported outputs for the\naddresses you control on the Utility Chain, otherwise, there will be no UTXO to\nconsume."]}),"\n",(0,r.jsx)(t.p,{children:"Here we are importing UTXOs that are exported from Value Chain."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  evm",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"ImportTx",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/apis/evm/index"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../createMultisig"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"async function ",props:{style:{color:"var(--ch-7)"}}},{content:"importP",props:{style:{color:"var(--ch-5)"}}},{content:"() {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // Use this parameter if you have UTXOs exported from other chains - only exported outputs will be fetched",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" sourceChain ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:'"X"',props:{style:{color:"var(--ch-8)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // unlock amount = sum(output amount) + fee (fees on Utility Chain is dynamic)",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" fee ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e4",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: ",props:{style:{color:"var(--ch-4)"}}},{content:'"0x4406a53c35D05424966bD8FC354E05a3c6B56aF0"',props:{style:{color:"var(--ch-8)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: ",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"2e4",props:{style:{color:"var(--ch-2)"}}},{content:"),",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: ",props:{style:{color:"var(--ch-4)"}}},{content:'"0x3b0e59fc2e9a82fa5eb3f042bc5151298e4f2cab"',props:{style:{color:"var(--ch-8)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // all the inputs here are the exported ones due to source chain parameter",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.c,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.c,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addressStrings.c,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputConfig,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    fee,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    sourceChain",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"importTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"ImportTx",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    networkID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.c,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.x,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    inputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputs",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"unsignedTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-5)"}}},{content:"(importTx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"tx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" unsignedTx.",props:{style:{color:"var(--ch-4)"}}},{content:"sign",props:{style:{color:"var(--ch-5)"}}},{content:"(keyChains.x)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"txID ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" evm.",props:{style:{color:"var(--ch-4)"}}},{content:"issueTx",props:{style:{color:"var(--ch-5)"}}},{content:"(tx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  console.",props:{style:{color:"var(--ch-4)"}}},{content:"log",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"TxID:"',props:{style:{color:"var(--ch-8)"}}},{content:", txID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"importP",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"You can use Dijets Utility Chain Explorer to view, import and export transactions on Utility Chain."}),"\n",(0,r.jsx)(t.h2,{id:"add-delegator-transaction",children:"Add Delegator Transaction"}),"\n",(0,r.jsx)(t.p,{children:"Till now we have covered common transactions like BaseTx, Export, and Import TX.\nExport and Import TX will be similar in all the UTXO-based chains like X and P.\nBut for Account-based chains, we have to deal with an account-balance system."}),"\n",(0,r.jsxs)(t.p,{children:["Now let's try using the multi-sig UTXOs exported from Value Chain to Method Chain to\nissue an ",(0,r.jsx)(t.code,{children:"addDelegator()"})," transaction. Create a file ",(0,r.jsx)(t.code,{children:"addDelegatorTx.js"})," and\npaste the following snippets."]}),"\n",(0,r.jsx)(t.h3,{id:"import-dependencies-3",children:"Import Dependencies"}),"\n",(0,r.jsxs)(t.p,{children:["Import the dependencies like ",(0,r.jsx)(t.code,{children:"AddDelegatorTx"})," and ",(0,r.jsx)(t.code,{children:"UnsignedTx"})," classes using the following code."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  djtxAssetID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  keyChains",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  chainIDs",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addresses",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  addressStrings",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  networkID",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  BN",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  platform",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../importAPI"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  UnsignedTx",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  AddDelegatorTx",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  SECPOwnerOutput",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ParseableOutput",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"} ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/apis/platformvm/index"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"NodeIDStringToBuffer",props:{style:{color:"var(--ch-2)"}}},{content:", ",props:{style:{color:"var(--ch-4)"}}},{content:"UnixNow",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"dijets/dist/utils"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const",props:{style:{color:"var(--ch-7)"}}},{content:" { ",props:{style:{color:"var(--ch-4)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-2)"}}},{content:" } ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"require",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"../createMultisig"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.h3,{id:"sending-adddelegator-transaction",children:"Sending AddDelegator Transaction"}),"\n",(0,r.jsxs)(t.p,{children:["Now we will create the ",(0,r.jsx)(t.code,{children:"addDelegator()"})," function which will use the multi-sig\nUTXOs and create a signed ",(0,r.jsx)(t.code,{children:"addDelegatorTx"}),", which when issued, will add the\ndelegator to the specified node. Paste the following snippet next."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"async function ",props:{style:{color:"var(--ch-7)"}}},{content:"addDelegator",props:{style:{color:"var(--ch-5)"}}},{content:"() {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" nodeID ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"NodeIDStringToBuffer",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"NodeID-4B4rc5vdD1758JSBYL1xyvE5NHGzz6xzH"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" locktime ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" stakeAmount ",props:{style:{color:"var(--ch-4)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" platform.",props:{style:{color:"var(--ch-4)"}}},{content:"getMinStake",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" startTime ",props:{style:{color:"var(--ch-4)"}}},{content:"= ",props:{style:{color:"var(--ch-7)"}}},{content:"UnixNow",props:{style:{color:"var(--ch-5)"}}},{content:"().",props:{style:{color:"var(--ch-4)"}}},{content:"add",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"60 ",props:{style:{color:"var(--ch-2)"}}},{content:"* ",props:{style:{color:"var(--ch-7)"}}},{content:"1",props:{style:{color:"var(--ch-2)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" endTime ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" startTime.",props:{style:{color:"var(--ch-4)"}}},{content:"add",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"2630000",props:{style:{color:"var(--ch-2)"}}},{content:"))",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" memo ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" Buffer.",props:{style:{color:"var(--ch-4)"}}},{content:"from",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"Multi-sig Add Delegator Tx"',props:{style:{color:"var(--ch-8)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // unlock amount = sum(output amounts) + fee",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" fee ",props:{style:{color:"var(--ch-4)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"BN",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:"1e6",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // creating stake amount output at 0th index",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" outputConfig ",props:{style:{color:"var(--ch-4)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" [",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    {",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      amount: stakeAmount.minValidatorStake,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      owners: addresses.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"      threshold: ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:",",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    },",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  ]",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  // outputs to be created for rewards",props:{style:{color:"var(--ch-1)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"rewardOutputOwners ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"SECPOwnerOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses.p, locktime, ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"rewardOwners ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"ParseableOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(rewardOutputOwners)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  let",props:{style:{color:"var(--ch-7)"}}},{content:" { inputs, outputs } ",props:{style:{color:"var(--ch-4)"}}},{content:"= await ",props:{style:{color:"var(--ch-7)"}}},{content:"createInputsAndOutputs",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    djtxAssetID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addresses.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    addressStrings.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    outputConfig,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    fee",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"addDelegatorTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"AddDelegatorTx",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    networkID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    chainIDs.p,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    [],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    inputs,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    memo,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    nodeID,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    startTime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    endTime,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    stakeAmount.minDelegatorStake,",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    [outputs[",props:{style:{color:"var(--ch-4)"}}},{content:"0",props:{style:{color:"var(--ch-2)"}}},{content:"]],",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"    rewardOwners",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  )",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"unsignedTx ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"UnsignedTx",props:{style:{color:"var(--ch-5)"}}},{content:"(addDelegatorTx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"tx ",props:{style:{color:"var(--ch-2)"}}},{content:"=",props:{style:{color:"var(--ch-7)"}}},{content:" unsignedTx.",props:{style:{color:"var(--ch-4)"}}},{content:"sign",props:{style:{color:"var(--ch-5)"}}},{content:"(keyChains.p)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  const ",props:{style:{color:"var(--ch-7)"}}},{content:"txID ",props:{style:{color:"var(--ch-2)"}}},{content:"= await",props:{style:{color:"var(--ch-7)"}}},{content:" platform.",props:{style:{color:"var(--ch-4)"}}},{content:"issueTx",props:{style:{color:"var(--ch-5)"}}},{content:"(tx)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"  console.",props:{style:{color:"var(--ch-4)"}}},{content:"log",props:{style:{color:"var(--ch-5)"}}},{content:"(",props:{style:{color:"var(--ch-4)"}}},{content:'"TxID:"',props:{style:{color:"var(--ch-8)"}}},{content:", txID)",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"}",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["In the above transaction, the ",(0,r.jsx)(t.code,{children:"outputs"})," parameter will be empty since we do not need\nto transfer any assets to the account. As you can see above we need to create\nanother type of output, for indicating the reward for delegation."]}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"rewardOutputOwners ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"SECPOwnerOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(addresses.p, locktime, ",props:{style:{color:"var(--ch-4)"}}},{content:"2",props:{style:{color:"var(--ch-2)"}}},{content:")",props:{style:{color:"var(--ch-4)"}}}]},{tokens:[{content:"const ",props:{style:{color:"var(--ch-7)"}}},{content:"rewardOwners ",props:{style:{color:"var(--ch-2)"}}},{content:"= new ",props:{style:{color:"var(--ch-7)"}}},{content:"ParseableOutput",props:{style:{color:"var(--ch-5)"}}},{content:"(rewardOutputOwners)",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsx)(t.p,{children:"Call the function by adding the below function call."}),"\n",(0,r.jsx)(l.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"addDelegator",props:{style:{color:"var(--ch-5)"}}},{content:"()",props:{style:{color:"var(--ch-4)"}}}]}],lang:"javascript"},annotations:[]}]}),"\n",(0,r.jsxs)(t.p,{children:["Run this file using ",(0,r.jsx)(t.code,{children:"node examples/addDelegatorTx.js"}),", see the txID in the\noutput, and look for it in the Dijets Unified explorer."]})]})}function y(o,t){throw new Error("Expected "+(t?"component":"object")+" `"+o+"` to be defined: you likely forgot to import, pass, or provide it.")}t.default=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(i,Object.assign({},o,{children:(0,r.jsx)(v,o)}))}}},function(o){o.O(0,[2331,2499,9774,2888,179],(function(){return t=21682,o(o.s=t);var t}));var t=o.O();_N_E=t}]);